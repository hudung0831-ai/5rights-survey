<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>간호연구 프로젝트 - 투약 시뮬레이션</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <div class="timer" id="timer">5</div>
    <div class="condition-indicator" id="conditionIndicator">조건: 압박 상황</div>
    
    <div class="container">
        <div class="header">
            <h1>간호연구 프로젝트</h1>
            <h2>시간적 압박이 투약 과정에서 인지오류에 미치는 영향</h2>
            <p>5 Rights를 중심으로</p>
        </div>

        <!-- 시작 화면 -->
        <div class="screen active" id="startScreen">
            <h2>실험 참여에 오신 것을 환영합니다</h2>
            <p>이 실험은 간호사의 투약 과정에서 시간 압박이 인지 오류에 미치는 영향을 조사하기 위한 연구입니다.</p>
            
            <h3>실험 설명</h3>
            <ul>
                <li><strong>기억 기반 테스트</strong>: 처방오더를 일정 시간 보신 후, 가려진 상태에서 문제를 풉니다</li>
                <li>총 3가지 기억 시간 조건에서 투약 관련 문제를 풀게 됩니다</li>
                <li>각 조건마다 10문항씩, 총 30문항입니다</li>
                <li>5 Rights (환자, 약물, 용량, 경로, 시간) 확인이 주요 내용입니다</li>
                <li>실험 시간은 약 5분 소요됩니다</li>
            </ul>

            <div class="alert-display">
                <strong>중요:</strong> 처방오더를 보는 시간이 제한되므로 집중해서 봐주세요!
            </div>

            <button class="btn btn-primary" onclick="showParticipantInfo()">실험 시작하기</button>
        </div>

        <!-- 참가자 정보 입력 -->
        <div class="screen" id="participantScreen">
            <h2>참가자 정보</h2>
            <div class="form-group">
                <label for="participantId">참가자 ID</label>
                <input type="text" id="participantId" placeholder="예: P001, P002">
            </div>
            
            <div class="form-group">
                <label for="experience">간호 경력</label>
                <select id="experience">
                    <option value="">선택해주세요</option>
                    <option value="신규">6개월 미만 (신규)</option>
                    <option value="초급">6개월-1년</option>
                    <option value="중급">1-3년</option>
                    <option value="고급">3-5년</option>
                    <option value="숙련">5년 이상</option>
                </select>
            </div>

            <div class="form-group">
                <label for="department">근무 부서</label>
                <select id="department">
                    <option value="">선택해주세요</option>
                    <option value="내과">내과병동</option>
                    <option value="외과">외과병동</option>
                    <option value="중환자실">중환자실</option>
                    <option value="응급실">응급실</option>
                    <option value="소아과">소아과병동</option>
                    <option value="기타">기타</option>
                </select>
            </div>

            <button class="btn btn-primary" onclick="showInstructions()">다음으로</button>
        </div>

        <!-- 실험 안내 -->
        <div class="screen" id="instructionScreen">
            <h2>실험 안내</h2>
            <div class="alert-display">
                <strong>중요:</strong> 실제 병원 환경에서의 투약 상황을 기억 기반으로 시뮬레이션합니다.
            </div>

            <h3>실험 진행 방식</h3>
            <div class="phase-transition">
                <div style="display: flex; justify-content: space-around; align-items: center;">
                    <div>
                        <div style="background: #3498db; color: white; padding: 20px; border-radius: 10px; margin-bottom: 10px;">
                            <strong>1단계: 기억</strong><br>
                            처방오더 보기<br>
                            (5/9/12초)
                        </div>
                    </div>
                    <div style="font-size: 30px; color: #7f8c8d;">→</div>
                    <div>
                        <div style="background: #e74c3c; color: white; padding: 20px; border-radius: 10px; margin-bottom: 10px;">
                            <strong>2단계: 문제</strong><br>
                            기억에 의존하여<br>
                            문제 풀이
                        </div>
                    </div>
                </div>
            </div>

            <h3>기억 시간 조건</h3>
            <ul>
                <li><strong>압박 조건:</strong> 5초 - 매우 짧은 기억 시간</li>
                <li><strong>보통 조건:</strong> 9초 - 보통 기억 시간</li>
                <li><strong>여유 조건:</strong> 12초 - 충분한 기억 시간</li>
            </ul>

            <h3>문제 유형</h3>
            <ul>
                <li><strong>객관식:</strong> 5 Rights 관련 선택 문제</li>
                <li><strong>주관식:</strong> 기억한 내용을 직접 작성</li>
                <li><strong>계산 문제:</strong> 환자 체중에 따른 용량 계산</li>
            </ul>

            <p><strong>준비가 되셨으면 연습 문제부터 시작하겠습니다.</strong></p>
            <button class="btn btn-success" onclick="startPractice()">연습 문제 시작</button>
        </div>

        <!-- 연습 문제 - 기억 단계 -->
        <div class="screen" id="practiceMemoryScreen">
            <div class="memory-phase">
                <div class="memory-instruction">다음 처방오더를 집중해서 봐주세요</div>
                
                <div class="prescription-display">
                    환자: 김철수 (1985.03.15)<br>
                    진단: Hypertension<br><br>
                    처방: Amlodipine 5mg PO once daily<br>
                    투약시간: 08:00<br>
                    특이사항: 공복 투여 금지
                </div>

                <div class="alert-display">
                    <strong>Alert:</strong> 이 환자는 베타차단제 알레르기가 있습니다.
                </div>

                <div id="practiceCountdown" class="countdown">5초 후 시작됩니다...</div>
            </div>
        </div>

        <!-- 연습 문제 - 문제 풀이 단계 -->
        <div class="screen" id="practiceQuestionScreen">
            <h2>연습 문제 - 기억에 의존하여 답하세요</h2>
            
            <div class="hidden-content">
                처방오더가 가려졌습니다. 기억에 의존하여 문제를 풀어주세요.
            </div>

            <div class="question-container">
                <div class="question-title">환자에게 처방된 약물의 이름과 용량은?</div>
                
                <div class="options">
                    <label class="option">
                        <input type="radio" name="practice" value="1">
                        ① Amlodipine 5mg
                    </label>
                    <label class="option">
                        <input type="radio" name="practice" value="2">
                        ② Amlodipine 10mg
                    </label>
                    <label class="option">
                        <input type="radio" name="practice" value="3">
                        ③ Atenolol 5mg
                    </label>
                    <label class="option">
                        <input type="radio" name="practice" value="4">
                        ④ Losartan 5mg
                    </label>
                </div>
            </div>

            <button class="btn btn-primary" onclick="checkPractice()">정답 확인</button>
            <div id="practiceResult" style="display: none; margin-top: 20px;"></div>
        </div>

        <!-- 실제 실험 - 기억 단계 -->
        <div class="screen" id="memoryScreen">
            <div class="memory-phase">
                <div class="memory-instruction" id="memoryInstruction">다음 처방오더를 집중해서 봐주세요</div>
                
                <div id="prescriptionContent">
                    <!-- 처방 내용이 여기에 동적으로 표시됩니다 -->
                </div>

                <div id="alertContent">
                    <!-- Alert 내용이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>

        <!-- 실제 실험 - 문제 풀이 단계 -->
        <div class="screen" id="questionScreen">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            
            <h2 id="conditionTitle">조건 1: 압박 상황 (5초 기억)</h2>
            <p>문제 <span id="questionNumber">1</span> / <span id="totalQuestions">30</span></p>
            
            <div class="hidden-content">
                처방오더가 가려졌습니다. 기억에 의존하여 문제를 풀어주세요.
            </div>

            <div id="questionContent">
                <!-- 문제가 여기에 동적으로 표시됩니다 -->
            </div>

            <div id="answerArea">
                <!-- 객관식 선택지 또는 주관식 입력창이 여기에 표시됩니다 -->
            </div>

            <button class="btn btn-primary" id="nextButton" onclick="nextQuestion()">다음 문제</button>
        </div>

        <!-- 완료 화면 -->
        <div class="screen" id="completeScreen">
            <h2>실험 완료!</h2>
            <p>실험에 참여해 주셔서 감사합니다.</p>
            <p>모든 응답이 기록되었습니다.</p>
            
            <div class="alert-display">
                연구자가 결과를 수집할 때까지 이 화면을 유지해주세요.
            </div>

            <div id="completionInfo">
                <h3>실험 완료 정보</h3>
                <p>참가자 ID: <span id="finalParticipantId"></span></p>
                <p>완료 시간: <span id="completionTime"></span></p>
                <p>총 문항 수: <span id="finalQuestionCount"></span></p>
            </div>

            <!-- 연구자용 기능 -->
            <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #ddd;">
                <h3>연구자 전용</h3>
                <button class="btn btn-warning" onclick="showResults()">결과 보기</button>
                <button class="btn btn-success" onclick="exportResults()">결과 내보내기</button>
            </div>

            <div id="resultsDisplay" style="display: none; margin-top: 20px;">
                <!-- 결과가 여기에 표시됩니다 -->
            </div>
        </div>
    </div>
            
<script src="questions.js"></script>
<script src="script.js"></script>
</body>
</html>

